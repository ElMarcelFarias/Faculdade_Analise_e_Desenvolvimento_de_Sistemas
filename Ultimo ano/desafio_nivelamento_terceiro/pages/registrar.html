<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <title> Sustentabilidade e Consciência</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Version" content="v2.2" />
    <link rel="shortcut icon" href="../images/mao_ambiente.svg">
    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../../../unicons.iconscout.com/release/v2.1.7/css/unicons.css">
    <link href="../css/style.css" rel="stylesheet" type="text/css" id="theme-opt" />
    <link href="../css/colors/default.css" rel="stylesheet" id="color-opt">
</head>
<body>
    <div id="preloader">
        <div id="status">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
    </div>
    
    <div class="back-to-home rounded d-none d-sm-block">
        <a href="index.html" class="btn btn-icon btn-soft-primary"><i data-feather="home" class="icons"></i></a>
    </div>
    
    <section class="cover-user bg-white">
        <div class="container-fluid px-0">
            <div class="row no-gutters position-relative">
                
                <div class="col-md-6 d-flex align-items-center justify-content-center py-5">
                    <div class="card login-page border-0 w-75">
                        <div class="card-body p-4">
                            <h4 class="card-title text-center">Cadastro</h4>
                            <!-- <form class="login-form mt-4" action="" method="post"> retirei action e method pois n tem back-to-home -->
                                <div class="form-group position-relative">
                                    <label>Nome de Usuário <span class="text-danger">*</span></label>
                                    <i data-feather="user" class="fea icon-sm icons"></i>
                                    <input class="form-control pl-5" placeholder="Nome de Usuário" id="nomeUsuario" required>
                                </div>
                                
                                <div class="form-group position-relative">
                                    <label>Senha <span class="text-danger">*</span></label>
                                    <i data-feather="key" class="fea icon-sm icons"></i>
                                    <input type="password" id="senha" class="form-control pl-5" placeholder="Senha" required>
                                </div>

                                <div class="form-group position-relative">
                                    <label>Confirme sua senha <span class="text-danger">*</span></label>
                                    <i data-feather="key" class="fea icon-sm icons"></i>
                                    <input type="password" id="confirmarSenha" class="form-control pl-5" placeholder="Confirmar senha" required>
                                </div>
                                
                                <button id="loginForm" onclick="verifyCredentials()" class="btn btn-primary btn-block">Entrar</button>
                                
                                <div class="text-center mt-4">
                                    <h6><a class="text-muted" href="login.html">Entrar</a></h6>
                                    <h6>Contate-nos</h6>
                                    <ul class="list-unstyled social-icon mb-0 mt-3 d-flex justify-content-center"> 
                                        <li class="list-inline-item mx-2"><a href="https://www.facebook.com/SOSMataAtlantica/?locale=pt_BR" target="_blank" class="rounded"><i data-feather="facebook" class="fea icon-sm fea-social"></i></a></li>
                                        <li class="list-inline-item mx-2"><a href="https://github.com/ElMarcelFarias/Faculdade_Analise_e_Desenvolvimento_de_Sistemas" target="_blank" class="rounded"><i data-feather="github" class="fea icon-sm fea-social"></i></a></li>
                                        <li class="list-inline-item mx-2"><a href="https://www.instagram.com/sosmataatlantica/" target="_blank" class="rounded"><i data-feather="instagram" class="fea icon-sm fea-social"></i></a></li>
                                    </ul>
                                </div>
                            <!-- </form> -->
                        </div>
                    </div>
                </div>

                <!-- Imagem Responsiva -->
                <div class="col-md-6 d-none d-md-block img" style="background-image:url('../images/registrar.jpg'); background-size: cover; background-position: center; height: 100vh;">
                </div>
                
            </div>
        </div>
    </section>
    
    <script src="../js/jquery-3.5.1.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/jquery.easing.min.js"></script>
    <script src="../js/scrollspy.min.js"></script>
    <script src="../js/feather.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.4.18/sweetalert2.all.min.js"></script>
    <script src="../js/app.js"></script>

    <script>
        function verifyCredentials() {

            // Obtém os valores dos inputs
            const username = document.getElementById('nomeUsuario').value.trim();
            const password = document.getElementById('senha').value.trim();
            const confirmPassword = document.getElementById('confirmarSenha').value.trim();

            // Verifica se todos os campos foram preenchidos
            if (!username || !password || !confirmPassword) {
                Swal.fire({
                    title: 'Erro',
                    html: 'Por favor, preencha todos os campos!',
                    icon: 'warning'
                });
                return;
            }

            // Valida se as senhas coincidem
            if (password !== confirmPassword) {
                Swal.fire({
                    title: 'Erro',
                    html: 'As senhas não coincidem!',
                    icon: 'error'
                });
                return;
            }

            // Verifica se o usuário já existe no localStorage
            let users = JSON.parse(localStorage.getItem('users')) || [];

            const userExists = users.some(user => user.username === username);

            if (userExists) {
                Swal.fire({
                    title: 'Erro',
                    html: 'Este nome de usuário já está em uso!',
                    icon: 'error'
                });
                return;
            }

            // Adiciona o novo usuário ao array
            users.push({ username, password });

            // Salva o array atualizado no localStorage
            localStorage.setItem('users', JSON.stringify(users));

            Swal.fire({
                title: 'Sucesso!',
                html: 'Cadastro realizado com sucesso!',
                icon: 'success',
                timer: 2000,
                showConfirmButton: false
            });

            // Redireciona após o sucesso
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 2500);
        }
    </script>
</body>
</html>
